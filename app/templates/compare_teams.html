{% extends 'base.html' %}
{% load static %}

{% block title %}Compare Teams{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'compare_teams.css' %}">
{% endblock %}

{% block content %}
<div class="content" typeof="schema:WebPage" resource="#team-comparison">
  <h1 property="schema:name">Compare Pokémon Teams</h1>
  <p class="description" property="schema:description">
    Compare two teams of up to 6 Pokémon each. Analyze their offensive and defensive coverage, 
    and see how well-balanced their roles are.
  </p>

  <div class="teams-container">
    <div class="team-section" typeof="pokemon:Team" resource="#team1">
      <h2>Team 1</h2>
      <div class="team-balance">
        <div class="balance-score" id="team1-balance">-</div>
        <div class="balance-label">Team Balance Score</div>
      </div>
      <div class="team-selection">
        <div class="search-box">
          <input type="text" class="pokemon-search" id="team1-search" placeholder="Search Pokémon...">
          <div class="suggestions" id="team1-suggestions"></div>
        </div>
        <div class="selected-team" id="team1-pokemon"></div>
      </div>
      <div class="team-analysis" id="team1-analysis">
        <div class="coverage">
          <h3>Type Coverage</h3>
          <div class="coverage-section">
            <h4>Offensive Coverage</h4>
            <div class="type-list" id="team1-offensive"></div>
          </div>
          <div class="coverage-section">
            <h4>Defensive Coverage</h4>
            <div class="type-list" id="team1-defensive"></div>
          </div>
        </div>
        <div class="roles">
          <h3>Team Roles</h3>
          <div class="roles-list" id="team1-roles"></div>
        </div>
      </div>
    </div>

    <div class="vs-section">
      <div class="pokeball-divider">
        <img src="https://raw.githubusercontent.com/replyre/poke-info/main/search.png" alt="VS">
      </div>
    </div>

    <div class="team-section" typeof="pokemon:Team" resource="#team2">
      <h2>Team 2</h2>
      <div class="team-balance">
        <div class="balance-score" id="team2-balance">-</div>
        <div class="balance-label">Team Balance Score</div>
      </div>
      <div class="team-selection">
        <div class="search-box">
          <input type="text" class="pokemon-search" id="team2-search" placeholder="Search Pokémon...">
          <div class="suggestions" id="team2-suggestions"></div>
        </div>
        <div class="selected-team" id="team2-pokemon"></div>
      </div>
      <div class="team-analysis" id="team2-analysis">
        <div class="coverage">
          <h3>Type Coverage</h3>
          <div class="coverage-section">
            <h4>Offensive Coverage</h4>
            <div class="type-list" id="team2-offensive"></div>
          </div>
          <div class="coverage-section">
            <h4>Defensive Coverage</h4>
            <div class="type-list" id="team2-defensive"></div>
          </div>
        </div>
        <div class="roles">
          <h3>Team Roles</h3>
          <div class="roles-list" id="team2-roles"></div>
        </div>
      </div>
    </div>
  </div>

  <button id="compare-button" class="compare-btn" disabled>Compare Teams</button>
</div>
{% endblock %}

{% block extra_scripts %}
<script>
  document.addEventListener('DOMContentLoaded', function() {
    // Placeholder for future functionality
    const teams = {
      team1: [],
      team2: []
    };

    function updateCompareButton() {
      const button = document.getElementById('compare-button');
      button.disabled = teams.team1.length === 0 || teams.team2.length === 0;
    }

    // Event listeners
    ['team1', 'team2'].forEach(teamId => {
      const searchInput = document.getElementById(`${teamId}-search`);
      
      searchInput.addEventListener('input', () => {
        // Placeholder for search functionality
      });
    });

    document.getElementById('compare-button').addEventListener('click', () => {
      // Placeholder for comparison functionality
    });

    // Hide suggestions when clicking outside
    document.addEventListener('click', (e) => {
      if (!e.target.closest('.search-box')) {
        document.querySelectorAll('.suggestions').forEach(el => {
          el.style.display = 'none';
        });
      }
    });
  });
</script>
{% endblock %} 